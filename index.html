<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@300;500&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <style>
        body, html { margin: 0; padding: 0; scroll-behavior: smooth; background-color: #fdfaf5; font-family: 'Montserrat', sans-serif; overflow-x: hidden; height: 100%; }
        
        .section { 
          width: 100vw; 
          height: 100vh; 
          display: flex; 
          flex-direction: column; 
          justify-content: center; 
          align-items: center; 
          text-align: center; 
          position: relative;
          box-sizing: border-box;
          padding: 20px;
        }

        img { max-width: 90%; max-height: 65%; object-fit: contain; border-radius: 10px; }
        
        /* Welcome Page */
        .welcome-bg { background: #722f5d; color: white; }
        .start-btn { background: #c49a6c; color: white; padding: 15px 40px; border: none; border-radius: 30px; font-size: 18px; cursor: pointer; font-family: 'Great Vibes', cursive; margin-top: 20px; transition: 0.3s; }
        
        /* Timer */
        .timer-display { display: flex; justify-content: center; gap: 10px; margin-top: 20px; width: 90%; }
        .time-box { background: rgba(114, 47, 93, 0.1); padding: 10px; border-radius: 10px; min-width: 65px; }
        .time-val { display: block; font-size: 22px; font-weight: bold; color: #722f5d; }
        .time-label { font-size: 10px; text-transform: uppercase; color: #722f5d; }

        /* Map Button */
        .map-btn { background: #722f5d; color: white; padding: 12px 25px; text-decoration: none; border-radius: 8px; margin-top: 15px; font-weight: bold; font-size: 14px; display: inline-block; color: white !important; }

        /* RSVP PAGE - Clean Blank Version */
        #rsvp { background-color: #ffffff; }

        .form-container {
            width: 100%;
            max-width: 400px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .rsvp-msg-top { font-size: 14px; color: #722f5d; line-height: 1.6; margin-bottom: 25px; font-weight: 500; }
        .rsvp-msg-bottom { font-size: 14px; color: #722f5d; line-height: 1.6; margin-top: 25px; font-weight: 500; }

        h2 { font-family: 'Great Vibes', cursive; color: #722f5d; font-size: 40px; margin: 0 0 15px 0; }
        
        select { 
            width: 100%; padding: 14px; border: 1.5px solid #c49a6c; 
            border-radius: 10px; margin-bottom: 12px; font-size: 16px; 
            background: white; font-family: 'Montserrat', sans-serif; color: #722f5d;
        }
        
        input { 
            width: 100%; padding: 14px; border: 1px solid #c49a6c; 
            border-radius: 10px; margin-bottom: 10px; box-sizing: border-box; 
            font-size: 15px; outline-color: #722f5d;
        }
        
        .confirm-btn { 
            width: 100%; background: #722f5d; color: white; border: none; 
            padding: 18px; border-radius: 10px; font-weight: bold; 
            cursor: pointer; font-size: 16px; margin-top: 10px; 
        }

        /* Success Screen */
        #whishScreen {
            display: none; 
            flex-direction: column; 
            align-items: center; 
            background: #ffffff;
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            justify-content: center; z-index: 10;
        }
    </style>
</head>
<body>

    <div class="section welcome-bg">
        <h1 style="font-family: 'Great Vibes', cursive; font-size: 55px; margin: 0;">Sultan & Aliya</h1>
        <p style="letter-spacing: 2px;">AUGUST 30, 2026</p>
        <button class="start-btn" onclick="startJourney()">Open Invitation</button>
    </div>

    <div class="section" id="s1">
        <img src="https://i.postimg.cc/MKxqrXw0/Save-the-date.png">
        <div class="timer-display">
            <div class="time-box"><span class="time-val" id="days">00</span><span class="time-label">Days</span></div>
            <div class="time-box"><span class="time-val" id="hours">00</span><span class="time-label">Hrs</span></div>
            <div class="time-box"><span class="time-val" id="mins">00</span><span class="time-label">Mins</span></div>
            <div class="time-box"><span class="time-val" id="secs">00</span><span class="time-label">Secs</span></div>
        </div>
    </div>

    <div class="section" id="s2">
        <img src="https://i.postimg.cc/RV94bqmW/details.png">
    </div>

    <div class="section" id="s3">
        <img src="https://i.postimg.cc/m2RB6h4Y/Wedding-Map-and-Direction-Card-in-Beige-Green-Pink-Watercolor-Floral-Style-(1).png">
        <a href="https://maps.google.com/?q=La+Citadelle+Barouk" target="_blank" class="map-btn">üìç Open Venue Map</a>
    </div>

    <div class="section" id="rsvp">
        <div class="form-container" id="formBox">
            <div class="rsvp-msg-top">
                Your presence would mean the world to us and we can't imagine celebrating without you!
            </div>
            
            <h2>R.S.V.P</h2>
            
            <select id="guestCount" onchange="generateInputs()">
                <option value="0">How many guests will attend?</option>
                <option value="1">1 Person</option>
                <option value="2">2 People</option>
                <option value="3">3 People</option>
                <option value="4">4 People</option>
                <option value="5">5 People</option>
            </select>
            
            <div id="dynamicInputs" style="width: 100%;"></div>
            
            <button class="confirm-btn" id="submitBtn" onclick="submitData()" style="display:none;">Confirm Attendance</button>

            <div class="rsvp-msg-bottom">
                Please confirm before August 10,<br>
                <strong>Lets celebrate together!</strong>
            </div>
        </div>

        <div id="whishScreen">
            <h2 style="font-family: 'Great Vibes', cursive; color: #722f5d; font-size: 38px; margin: 0;">Reservation Booked!</h2>
            <p style="color: #c49a6c; margin-top: 5px;">We can't wait to see you.</p>
            <img src="https://i.postimg.cc/28mrX3Yq/Whish.png" style="max-height: 70vh;">
        </div>
    </div>

    <script>
        // Timer Logic
        const target = new Date("August 30, 2026 19:30:00").getTime();
        setInterval(function() {
            const now = new Date().getTime();
            const d = target - now;
            document.getElementById("days").innerText = Math.floor(d / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
            document.getElementById("hours").innerText = Math.floor((d % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
            document.getElementById("mins").innerText = Math.floor((d % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
            document.getElementById("secs").innerText = Math.floor((d % (1000 * 60)) / 1000).toString().padStart(2, '0');
        }, 1000);

        function startJourney() {
            const secs = ['s1', 's2', 's3', 'rsvp'];
            let i = 0;
            const scroll = setInterval(() => {
                if (i < sections.length) { // Fixed reference error
                     document.getElementById(secs[i]).scrollIntoView({ behavior: 'smooth' });
                     i++;
                } else { clearInterval(scroll); }
            }, 3500);
        }
        
        // Needed to fix a small typo in the journey script above
        const sections = ['s1', 's2', 's3', 'rsvp'];

        function generateInputs() {
            const count = document.getElementById('guestCount').value;
            const container = document.getElementById('dynamicInputs');
            const btn = document.getElementById('submitBtn');
            container.innerHTML = "";
            if (count > 0) {
                for (let i = 0; i < count; i++) {
                    const inp = document.createElement('input');
                    inp.type = 'text';
                    inp.className = 'guest-name';
                    inp.placeholder = 'Guest ' + (i + 1) + ' Full Name';
                    container.appendChild(inp);
                }
                btn.style.display = "block";
            } else { btn.style.display = "none"; }
        }

        function submitData() {
            const inps = document.querySelectorAll('.guest-name');
            const names = [];
            inps.forEach(i => { if(i.value.trim() !== "") names.push(i.value.trim()); });
            if(names.length == 0) { alert("Please enter guest names."); return; }
            
            document.getElementById('submitBtn').innerText = "Registering...";
            google.script.run.withSuccessHandler(function() {
                document.getElementById('formBox').style.display = 'none';
                document.getElementById('whishScreen').style.display = 'flex';
            }).recordResponse(names);
        }
    </script>
</body>
</html>
